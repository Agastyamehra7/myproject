<!-- {% extends 'main.html' %} -->
{% load static %} 

{% block styles %}
<link rel="stylesheet" href="{% static 'styles/home.scss' %}" />
<link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.6/css/unicons.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock %}

<!-- Title -->
{% block title %}
<title>Dashboard</title>
{% endblock %}

{% block content %} 
<nav>
  <div class="container">
    <div class="log">
      <img src="{% static 'images/truffle.png' %}" style="height:75px;cursor:pointer;">
    </div>
      <div class="search-bar">
          <i class="uil uil-search"></i>
          <input type="search" placeholder="Search for creators,
          inspirations, and projects">
      </div>
      <div class="create">
        {% if user.is_authenticated %}
        <a href="{% url 'logout' %}">logout</a>
       {% else %}
       <a href="{% url 'signup' %}">Signup</a>
      <a href="{% url 'login' %}">Login</a>
       {% endif %}
         <!-- <label class="btn btn-primary" for="create-post">Create</label> -->
         <button class="btn btn-primary">
            <a href="{% url 'add_post' %}" style="color: #fff;text-decoration: none;">Create Post</a>
         </button>
          <div class="profile-photo" style="cursor:pointer;">
           <img src="{{user_profile.profileimg.url}}" alt="profile-photo">
         </div>
      </div>
  </div>
</nav>

<!-- MAIN -->

<main style="background-color:rgb(244, 234, 234); padding-top: 40px;">
  <div class="container">
      <div class="left">
        {% if user.is_authenticated %}
         <a class="profile">
          <div class="profile-photo" style="cursor:pointer;">
          <img src="{{user_profile.profileimg.url}}" alt="profile-1">
          </div>
          <div class="handle">
              <h4 style="text-decoration: none;">{{user_profile.fname}}</h4>
              <p class="text-muted">
                {{user_profile.username}}
              </p>
          </div>
         </a>
         {% endif %}
         <!-- sidebar -->
         <div class="sidebar">
          <a class="menu-item active" href="{% url 'home' %}">
              <span><i class="uil uil-home"></i></span><h3>Home</h3>
          </a>
          <a class="menu-item" href="{% url 'add_post' %}">
              <span><i class="uil uil-compass"></i></span><h3>
                Add Post
            </h3>
          </a>
              
              <a class="menu-item" href="{% url 'edit_profile_page' user.profile.id %}">
              <span><i class="uil uil-envelope-alt"></i></span>
              <h3>Edit Profile</h3>
              </a>

              
              <a class="menu-item">
              <span><i class="uil uil-bookmark"></i></span><h3>Profile</h3>
              </a>
              <a class="menu-item">
              <span><i class="uil uil-chart-line"></i></span><h3>Analytics</h3>
              </a>
         </div>
         <!-- end of sidebar -->
         <button class="btn btn-primary">
            <a href="{% url 'add_post' %}" style="color: #fff;text-decoration: none;">Create Post</a>
         </button>
      </div>
      <!-- END OF LEFT -->

      <div class="middle">
          <!-- FEED -->
          <div class="feeds">
              <!-- FEED 1 -->
              {% if count_posts == 0  %}
              <div class="empty-state">
                <div class="empty-state__content">
                  <div class="empty-state__icon">
                    <img src="{% static 'images/home/not-found.webp' %}" alt="">
                  </div>
                  <div class="empty-state__message" style="color: #9a35dd;font-weight: bold;font-size: 30px; text-align: center;">No posts has been added yet.</div>
                  <br/><br/><br/>
                </div>
              </div>
      
              {% else %}
              {% for post in all_posts reversed %}
              <div class="feed">
                  <div class="head">
                      <div class="user">
                          <div class="profile-photo">
                              <img src="{{ profile.profileimg.url}}" alt="profile-13" style="width:50px;">
                          </div>
                          <div class="ingo">
                              <h3>{{ post.author }}</h3>
                              <small>{{ post.location }}</small>
                          </div>
                          
                      </div>
                      <span class="edit">
                          <!-- <i class="uil uil-ellipsis-h"> -->
                            <ul>
                                <li> 
                                  <a href="#" class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md ">
                                   <i class="uil-trash-alt mr-1"></i>  Delete Post
                                  </a> 
                              </li>
                            </ul>
                          <!-- </i> -->
                        
                      </span>

                  </div>
                  <div class="photo">
                    <a href="{{ post.image.url }}">
                      <img src="{{ post.image.url }}" alt="feed-1">
                    </a>
                  </div>
                  <div class="action-buttons">
                      <div class="interaction-buttons">
                        <!-- Like post -->
                             <a href="/like-post?post_id={{post.id}}" style="text-decoration: none;">
                              <span><i class="uil uil-heart" id="heart" style="color: #000;"></i></span>
                            </a>
                                  <span><i class="uil uil-comment-dots"></i></span>
                              </div>
                      <div class="bookmark">
                          <span><i class="uil uil-bookmark-full"></i>

                      </div>
                  </div>

                  <div class="liked-by">
                    {% if post.no_of_likes == 0 %}
                    <p><b>No Likes</b></p>
                    {% else %}
                      <p><b>Liked by {{post.no_of_likes}} person</b></p>
                    {% endif %}
                  </div>
                  <div class="caption">
                      <p><b>{{ post.author }}</b> {{ post.caption|safe }}</p>
                  </div>
                  <div class="comments text-muted">View all 277 comments
                    <a href="{% url 'add_comment' post.pk %}" >Add Comment</a>
                  <br/><br/><br/>

                 {% for comment in post.comments.all %}
                 <strong>{{ comment.name }}-{{ comment.date_added }}</strong>
                  <br/>
                  {{ comment.body }}
                 <br/>
                    <hr>
                  </div>
              </div>
              {% endfor %}
              {% endfor %}
              {% endif %}
          </div>
          <!-- END OF FEEDS -->
      </div>
      <!-- END OF MIDDLE  -->
          <!-- RIGHT -->
      <div class="right">
      <!-- END OF MESSAGES -->

      <!-- FRIEND REQUESTS -->
      <div class="friend-requests">
          <h4 style="color:rgb(107,76,230)">User Suggestions</h4>
          <div class="request">
              <div class="ingo">
                {% for user in all_profile %}
                  <div class="profile-photo">
                      <img src="{{ user.profileimg.url }}">
                          
                  </div>
                  <div>
                      <h5>{{user.fname}} {{user.lname}}</h5>
                      <p class="text-muted">
                          8 mutual friends
                      </p>
                      
                      </div>
                  </div>
                  <div class="action">
                     {{user.description}} 
                  </div>
              {% endfor %}

          </div>
      </div>

      </div>
      <!-- END OF RIGHT -->
  </div>
</main>
</div>


<script src="{% static 'scripts/index.js' %}" type="text/javascript"></script>

{% endblock %}